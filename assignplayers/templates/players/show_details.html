{% extends 'players/base.html' %}
{% load static %}

{% block content %}
    <div class="container">
        <div class="jumbotron">
            <div id="dvtree">
            </div>
        </div>
    </div>

<script>
    var options = '';
    var treeData = '';
    var res = "{{pk}}";
    $.ajax({
        url: '/return_json_value/'+res+'/',
        type: 'GET',
        crossDomain: true,
        datatype: "jsonp",
        success: function(data) {
            treeData = data.json_data;
            createTree();
	}

});

    function createTree(){
        var str='';
        var add='';
        str=str+'<ul>';
        for (var i = 0; i < treeData.length; i++) {
            if(treeData[i]["ParentId"] === null){
                str=str+'<li><input type="checkbox" name='+treeData[i]["NodeId"].toString()+'><a href="#" onclick="populateTree('+treeData[i]["NodeId"].toString()+');">'+treeData[i]["NodeTitle"]+'</a></li>';
            }

        }
        str=str+'</ul>';
<!--        document.getElementById("dvtree").innerHTML = add.value;-->
        $("#dvtree").html(str);
    }


    function populateTree(parentid)
    {
        var str = '';
        str=str+'<ul>';
        for (var i = 0; i < treeData.length; i++) {
            if(treeData[i]["ParentId"] !== null)
            {
            if(treeData[i]["ParentId"].toString() === parentid.toString())
                str=str+'<li><input type="checkbox" name='+treeData[i]["NodeId"].toString()+'><a href="#" onclick="populateTree('+treeData[i]["NodeId"].toString()+');">'+treeData[i]["NodeTitle"]+'</a></li>';
            }
        }
        str=str+'</ul>';
        $("#dvtree").html(str);

<!--        treeData[i]["Checked"]=1;-->
    }
</script>
{% endblock %}





